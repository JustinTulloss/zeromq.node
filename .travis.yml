env:
 - ZMQ="git://github.com/zeromq/zeromq2-x.git"
 - ZMQ="git://github.com/zeromq/zeromq3-x.git -b v3.1.0"
 - ZMQ="git://github.com/zeromq/zeromq3-x.git -b v3.2.4"
 - ZMQ="git://github.com/zeromq/zeromq4-x.git -b v4.0.3" SODIUM="git://github.com/jedisct1/libsodium.git -b 0.4.5"
before_install:
 - sudo apt-get install uuid-dev
 - '[ -z "$SODIUM" ] || git clone --depth 1 $SODIUM libsodium'
 - '[ -z "$SODIUM" ] || cd libsodium'
 - '[ -z "$SODIUM" ] || ./autogen.sh'
 - '[ -z "$SODIUM" ] || ./configure'
 - '[ -z "$SODIUM" ] || make'
 - '[ -z "$SODIUM" ] || sudo make install'
 - '[ -z "$SODIUM" ] || cd ..'
 - git clone --depth 1 $ZMQ zmqlib
 - cd zmqlib
 - ./autogen.sh
 - ./configure
 - make
 - sudo make install
 - sudo /sbin/ldconfig
 - cd ..
 - rm -rf ~/.nvm && rm -rf ~/.npm
 - git clone https://github.com/creationix/nvm.git ~/.nvm
 - source ~/.nvm/nvm.sh
 - nvm i 0.8 && nvm i 0.10 && nvm i 0.12 && nvm i iojs
language: node_js
script:
 - nvm use 0.8 && make
 - travis_retry npm test && make clean
 - nvm use 0.10 && make
 - travis_retry npm test && make clean
 - nvm use 0.12 && make
 - travis_retry npm test && make clean
 - nvm use iojs && make
 - travis_retry npm test
